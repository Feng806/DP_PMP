(function(){document.addEventListener("DOMContentLoaded",xt,false);var e=true;var a=false;var t="/fc/ca/";var r="/fc/i/";var i="/fc/ip/?url=";var n="/fc/";var s="";var l;var o;var c;var d;var f=6;var u;var g;var h=navigator.userAgent.toLowerCase();var p=h.indexOf("android")>-1;var v=navigator.appVersion.indexOf("MSIE 10")!==-1;var _;var m;var w="#ffd33a";var x="#ffbb36";var C="#FFFFFF";var y="#000000";var b="#ffd33a";var T="#ffbb36";var k="#000000";var S=false;var I="#FFFFFF";var j="#ffffff";var L="#f0f0f0";var G=y;var A=y;var F=y;var U=false;var R=false;var M=false;var X;var Y=true;var E="images/template/fc_meta_solve_welldone.png";var B=false;var P=[];var Q=[];var N=0;var O=12;var G=y;var W;var H=false;var D=w;var z=x;var A=y;var F=y;var V=false;var q=false;var J=false;var K;var Z="en";var ea,aa;var ta=false;var ra=false;var ia=0;var na=false;var sa=[];var la="";var oa="/landingbg.jpg";var ca=false;var da="";var fa;var ua="";var ga=false;var ha=false;var pa=false;var va="";var _a="";var ma=true;var wa="";var xa="";var Ca=0;var ya=3;var ba=8;var Ta=["Move the","woman","into the middle"];var ka=["Move your","favorite","into the middle"];var Sa=true;var Ia=false;var ja=false;var La,Ga,Aa,Fa,Ua;var Ra=false;var Ma=300;var Xa=250;var Ya=false;var Ea=0;var Ba=[];var Pa,Qa;var Na;var Oa=0;var Wa=0;var Ha=[];var Da=false;var za=false;var $a=false;var Va=1;var qa=false;var Ja=0,Ka=0,Za=0;var et=0;var at=0;var tt=0;var rt;var it=false;var nt;var st;var lt=1e3*60;var ot=false;var ct={};var dt=false;var ft="";var ut;var gt;var ht;var pt=null;var vt=false;var _t=false;var mt;var wt=false;function xt(){La=document.getElementById("FunCAPTCHA");La.width=Ma;La.height=Xa;Ga=La.getContext("2d");Aa=new createjs.Stage(La);Aa.enableMouseOver(10);Aa.mouseMoveOutside=false;$("#FunCAPTCHA",document).bind("nextAppLoaded",Ki);$("#FunCAPTCHA",document).bind("hideApp",Zi);$("#FunCAPTCHA",document).bind("showApp",en);$("#FunCAPTCHA",document).bind("loadProgress",an);$("#FunCAPTCHA",document).bind("victoryScreenLoaded",Jt);$("#FunCAPTCHA",document).bind("skipStartupScreen",ar);$("#FunCAPTCHA",document).bind("showTab",Zt);$("#FunCAPTCHA",document).bind("hideTab",er);if(window.parent.document){try{n=parent.getCDN();s=n+"/apps/canvas/002";if(p){v=true}var e=navigator.userAgent.toLowerCase();if(e.indexOf("msie")!=-1){if(parseInt(e.split("msie")[1])==9||parseInt(e.split("msie")[1])==6){v=true}}if(e.indexOf("safari")!=-1){var t=e.split("version/")[1];if(typeof t==="string")t=parseInt(t.substr(0,1));if(t<=5){v=true}}if(v){s=i+s}E=s+"/images/template/fc_meta_solve_welldone.png";it=parent.showStartup();l=parent.getSID();u=parent.getGameSid();c=parent.getGameToken();o=parent.getSessionToken();d=parent.getSec();_wave_count=parent.getWaveCount();g=parent.getGameData();tn(g);K=parent.getLangData();Z=parent.getLang();Sa=g.display_fc_welldone;if(g.final_challenge_text){ka=g.final_challenge_text.split(",")}if(g.customGUI._002_challenge_text){Ta=g.customGUI._002_challenge_text.split(",")}Sa=g.display_fc_welldone;if(g.customGUI._intro_game_bg){U=g.customGUI._intro_game_bg}if(g.customGUI._white_meta_logo){R=g.customGUI._white_meta_logo}if(g.customGUI._meta_logo){X=g.customGUI._meta_logo}if(g.customGUI._no_fun){M=g.customGUI._no_fun}if(g.customGUI._landing_bg_path){oa=g.customGUI._landing_bg_path}if(g.customGUI._landing_bg){S=g.customGUI._landing_bg}if(g.customGUI._end_banner){aa=g.customGUI._end_banner}if(g.customGUI._app_bg){ea=g.customGUI._app_bg}if(g.customGUI._guiNoOutline){V=g.customGUI._guiNoOutline}if(g.customGUI._guiNoShadow){q=g.customGUI._guiNoShadow}if(g.customGUI._guiNoOverlay){J=g.customGUI._guiNoOverlay}if(g.customGUI._guiNoInfoBG){W=g.customGUI._guiNoInfoBG}if(g.customGUI._guiTheme){N=parseInt(g.customGUI._guiTheme)}else{N=0}if(typeof g.customGUI._guiTaper!=="undefined"){O=parseInt(g.customGUI._guiTaper)}if(g.customGUI._disableFinalChallenge){H=g.customGUI._disableFinalChallenge}if(g.customGUI._disableRim){_disable_rim=g.customGUI._disableRim}if(g.customGUI.skip_answer_return){dt=g.customGUI.skip_answer_return}if(g.customGUI.custom_star_url){ft=g.customGUI.custom_star_url}if(typeof g.customGUI.game_rid!="undefined"){mt=g.customGUI.game_rid}if(g.customGUI._disableFinalChallenge){H=g.customGUI._disableFinalChallenge}if(g.customGUI._img_set){na=true;for(var r in g.customGUI._img_set){var f=g.customGUI._img_set[r];if(f!=""&&sa.length<8){sa.push({url:f,id:r})}}if(sa.length<8){var h=8-sa.length;var C=0;for(var P=0;P<h;P++){sa.push(sa[C]);C++;if(C>=sa.length+1){C=0}}}}if(g.customGUI._skip_start_up){B=true}if(g.customGUI._guiColorMain){_=g.customGUI._guiBGColorMain;m=g.customGUI._guiBGColorSecondary;w=g.customGUI._guiColorMain;x=g.customGUI._guiColorSecondary;y=g.customGUI._guiTextColor;if(g.customGUI._guiLoaderColor){I=g.customGUI._guiLoaderColor}else{I=y}if(g.customGUI._guiProgressColorMain){j=g.customGUI._guiProgressColorMain}else{j=w}if(g.customGUI._guiProgressColorSecondary){L=g.customGUI._guiProgressColorSecondary}else{L=x}if(g.customGUI._landingTextInfoColor){A=g.customGUI._landingTextInfoColor}else{A=k}if(g.customGUI._landingColorMain){b=g.customGUI._landingColorMain}else{b=w}if(g.customGUI._landingColorSecondary){T=g.customGUI._landingColorSecondary}else if(g.customGUI._landingColorMain){T=g.customGUI._landingColorMain}else{T=x}if(g.customGUI._landingTextColor){k=g.customGUI._landingTextColor}else{k=y}if(g.customGUI._landingTextInfoColor){A=g.customGUI._landingTextInfoColor}else{A=k}if(g.customGUI._guiActionButtonColorMain){D=g.customGUI._guiActionButtonColorMain}else{D=w}if(g.customGUI._guiActionButtonColorSecondary){z=g.customGUI._guiActionButtonColorSecondary}else{z=x}if(g.customGUI._guiInfoText){G=g.customGUI._guiInfoText}else{G=y}if(g.customGUI._guiProgressTextColor){F=g.customGUI._guiProgressTextColor}else{F=y}}if(g.customGUI.welldone_stars=="0"){Y=false}else{Y=true}if(g.customGUI.is_fc2===1){for(var r in g.customGUI){if(r.search("fc_2")){ct[r]=g.customGUI[r]}}ot=true;ct["_meta_icon_colour"]=g.customGUI._meta_icon_colour;ct["_meta_bg_colour"]=g.customGUI._meta_bg_colour}if(g.customGUI.welldone){E=g.customGUI._welldone_path;Sa=true}if(ct._disableSurveyInstructions){Ia=ct._disableSurveyInstructions}if(ct._disableChallengeInstructions){ja=ct._disableChallengeInstructions}if(ct._center_survey_img_url){wa=ct._center_survey_img_url;if(v){wa=i+wa}}if(ct._center_challenge_img_url){xa=ct._center_challenge_img_url;if(v){xa=i+xa}}if(parent.hasExtraData()){Sa=false}if(g.extra_data){tn(g.extra_data);if(g.extra_data.fc_victory_html){ha=true;da=g.extra_data.fc_victory_html}if(g.extra_data.fc_background_img&&g.extra_data.fc_background_img!=""){if(U){S=true;oa=ea}ea=i+g.extra_data.fc_background_img;ta=true}if(g.extra_data.fc_banner_img&&g.extra_data.fc_banner_img!=""){Sa=false;Y=false;aa=i+g.extra_data.fc_banner_img}if(g.extra_data.fc_ui_color&&g.extra_data.fc_ui_color!=""){if(g.extra_data.fc_ui_color.length==7&&g.extra_data.fc_ui_color.charAt(0)=="#"){b=w;T=x;w=x=g.extra_data.fc_ui_color;j=L=D=z=w}}if(g.extra_data.fc_ui_text_color&&g.extra_data.fc_ui_text_color!=""){if(g.extra_data.fc_ui_text_color.length==7&&g.extra_data.fc_ui_text_color.charAt(0)=="#"){k=y;y=g.extra_data.fc_ui_text_color;G=F=y}}if(g.extra_data._show_camera_survey){ma=g.extra_data._show_camera_survey}if(g.extra_data.fc_drag_survey){tn(g.extra_data.fc_drag_survey.options);na=true;sa=[];for(var r in g.extra_data.fc_drag_survey.options){var f=g.extra_data.fc_drag_survey.options[r];if(f.img!=""&&sa.length<8){sa.push({url:i+f.img,id:r,victory:i+f.banner,victory_url:f.url,tracker:f.tracker,html:f.html_content,click_macro:f.click_tracker});if(f.banner!=""||f.html_content!=""){ha=true}}}tn(sa);if(sa.length<8){tn("LESS THAN 8!!!");var h=8-sa.length;tn("totalNewNeeded: "+h);var C=0;for(var P=0;P<h;P++){sa.push(sa[C]);C++;if(C>=sa.length+1){C=0}}tn(sa)}if(g.extra_data.fc_drag_survey.text&&g.extra_data.fc_drag_survey.text!=""){if(g.extra_data.fc_drag_survey.text.indexOf(",")>=0){var Q=g.extra_data.fc_drag_survey.text.split(",");ka=[Q[0],Q[1],Q[2]]}else{ka=["Move your",g.extra_data.fc_drag_survey.text,"into the middle"]}}}}if(!d){d=20}switch(d){case 5:ya=0;break;case 10:ya=1;break;case 20:ya=3;break;case 30:ya=5;break}if(g.waves){if(g.waves>5){ya=g.waves;d=30}}if(v){ea=i+ea;aa=i+aa}a=parent.getDebug();Oa=parent.getTime();parent.bindEvts($("#FunCAPTCHA",document));At()}catch(ra){tn(ra)}}Fa=new createjs.LoadQueue(false,null,true);Fa.setMaxConnections(5);Fa.addEventListener("fileload",cr);Fa.addEventListener("error",Yt);Fa.addEventListener("complete",Kt);st=setTimeout(function(){nn()},lt);xr=new createjs.Container;Aa.addChild(xr);Bt();if(!ot)nr();else sr();rn("begin load","startup screen")}var Ct,yt,bt,Tt,kt,St,It,jt,Lt,Gt;function At(){Ct=Ft("landing_info","game_meta",N).split(",");yt=Ft("landing_button","game_meta",N);bt=Ft("touch_button_info","game",N).split(",");Tt=Ft("touch_done_info","game",N).split(",");kt=Ft("done_button","game",N);St=Ft("seconds","game_meta",N);It=Ft("wait_text","game_meta",N);jt=Ft("fail_button","game",N);Lt=Ft("fail_top","game",N);Gt=Ft("fail_info","game",N);if(g.customGUI._text_landing_button){yt=g.customGUI._text_landing_button}if(g.customGUI._text_landing_info){Ct=g.customGUI._text_landing_info.split(",")}if(g.customGUI._finalChallengeInstruction1){P=g.customGUI._finalChallengeInstruction1.split(",")}else{P=bt}if(g.customGUI._finalChallengeInstruction2){Q=g.customGUI._finalChallengeInstruction2.split(",")}else{Q=Tt}}function Ft(e,a,t){if(t==0){t=null}for(var r=K[a].length-1;r>=0;r--){if(K[a][r].str_id==e&&K[a][r].sub_location==t){return K[a][r].string}}for(var i=K[a].length-1;i>=0;i--){if(K[a][i].str_id==e){return K[a][i].string}}return""}function Ut(){qt();Rt()}function Rt(){var e=[{id:"star",src:s+"/images/general/fc_shared_star.png",type:createjs.LoadQueue.IMAGE},{id:"tick",src:s+"/images/general/fc_shared_tick_small.png",type:createjs.LoadQueue.IMAGE},{id:"l_tick",src:s+"/images/general/fc_shared_tick_large.png",type:createjs.LoadQueue.IMAGE},{id:"great",src:s+"/images/general/fc_shared_great.png",type:createjs.LoadQueue.IMAGE},{id:"perfect",src:s+"/images/general/fc_shared_perfect.png",type:createjs.LoadQueue.IMAGE},{id:"good",src:s+"/images/general/fc_shared_good.png",type:createjs.LoadQueue.IMAGE},{id:"goodtry",src:s+"/images/general/fc_shared_goodtry.png",type:createjs.LoadQueue.IMAGE},{id:"cross",src:s+"/images/general/fc_shared_cross.png",type:createjs.LoadQueue.IMAGE},{id:"completeStars",src:s+"/images/template/fc_meta_solve_stars.png",type:createjs.LoadQueue.IMAGE},{id:"completeTxt",src:E,type:createjs.LoadQueue.IMAGE}];if(!ot){e.push({id:"midpic",src:s+"/images/app/fc_02_camera.png",type:createjs.LoadQueue.IMAGE});e.push({id:"picFrame",src:s+"/images/app/fc_02_frame.jpg",type:createjs.LoadQueue.IMAGE})}else{if(xa){e.push({id:"midpic",src:xa,type:createjs.LoadQueue.IMAGE})}else{e.push({id:"midpic",src:s+"/images/app/fc2_02_camera.png",type:createjs.LoadQueue.IMAGE})}}if(!U){e.push({id:"bg",src:ea?ea:r+c+"/"+u+"/appbg.jpg",type:createjs.LoadQueue.IMAGE})}if(Sa){e.push({id:"complete",src:aa?aa:r+c+"/"+u+"/bannerbg.jpg",type:createjs.LoadQueue.IMAGE});ga=true}if(ft){e.push({id:"customStarAsset",src:ft,type:createjs.LoadQueue.IMAGE})}Fa.loadManifest(e);TweenLite.to(this,10,{onComplete:Xt,onCompleteParams:[Fa,0]})}var Mt=0;function Xt(e,a){if(Mt<20){if(!a){a=0}if(e.progress!=1){if(e.progress==a){Yt("timeout")}else{TweenLite.to(this,10,{onComplete:Xt,onCompleteParams:[e,e.progress]})}}}}function Yt(e){if(Mt<20){tn(e);TweenLite.killTweensOf(this);parent.boostRefresh();Mt++;Fa.reset();Fa.removeAll();Fa.removeAllEventListeners();Fa.close();Fa=new createjs.LoadQueue(false,null,true);Fa.setMaxConnections(5);Fa.addEventListener("fileload",cr);Fa.addEventListener("error",Yt);Fa.addEventListener("complete",Kt);TweenLite.to(this,1,{onComplete:Ut})}}function Et(e){tn(e)}function Bt(){nt=new createjs.LoadQueue(false,null,true);nt.addEventListener("error",Pt);nt.addEventListener("complete",Vt);var e=[];if(X){e.push({id:"meta_logo",src:X,type:createjs.LoadQueue.IMAGE})}else{if(M){if(R){e.push({id:"meta_logo",src:s+"/images/meta/fc_nf_meta_logo_white.png",type:createjs.LoadQueue.IMAGE})}else{e.push({id:"meta_logo",src:s+"/images/meta/fc_nf_meta_logo.png",type:createjs.LoadQueue.IMAGE})}}else{if(R){e.push({id:"meta_logo",src:s+"/images/meta/fc_meta_logo_white.png",type:createjs.LoadQueue.IMAGE})}else{e.push({id:"meta_logo",src:s+"/images/meta/fc_meta_logo.png",type:createjs.LoadQueue.IMAGE})}}}if(_&&m){}else{if(U||S){if(S){e.push({id:"landingbg",src:oa,type:createjs.LoadQueue.IMAGE})}if(U){e.push({id:"bg",src:ea?ea:r+c+"/"+u+"/appbg.jpg",type:createjs.LoadQueue.IMAGE})}}else{e.push({id:"meta_bg",src:s+"/images/meta/fc_meta_bg.png",type:createjs.LoadQueue.IMAGE})}}if(e){nt.loadManifest(e)}}function Pt(){nt.reset();nt.removeAll();nt.removeAllEventListeners();nt.close();parent.boostRefresh();Mt++;TweenLite.to(this,1,{onComplete:Bt})}function Qt(e,a){var t=new createjs.Container;var r=new createjs.Shape;r.graphics.setStrokeStyle(4).beginStroke("#000000").lineTo(36,50).lineTo(300,50).lineTo(300,0).lineTo(3,0).closePath();r.x=0;r.y=105;t.addChild(r);var i=new createjs.Shape;i.graphics.setStrokeStyle(1).beginStroke("#FFFFFF").beginLinearGradientFill([e,a],[0,.1],0,30,0,200).lineTo(36,50).lineTo(300,50).lineTo(300,0).lineTo(3,0).closePath();i.x=0;i.y=105;t.addChild(i);return t}function Nt(){var e=new createjs.Container;var a=new createjs.Shape;a.graphics.beginLinearGradientFill([_,m],[0,1],0,0,0,300);a.graphics.drawRect(0,0,300,250);e.addChild(a);return e}var Ot,Wt,Ht,Dt,zt,$t;function Vt(){Ut();if(_&&m){Dt=Nt()}else{if(S){Dt=new createjs.Bitmap(nt.getResult("landingbg"))}else if(U){Dt=new createjs.Bitmap(nt.getResult("bg"))}else{Dt=new createjs.Bitmap(nt.getResult("meta_bg"))}}xr.addChild(Dt);if(!W&&!ot){Ot=Qt(b,T);xr.addChild(Ot)}switch(N){case 2:Wt=zi([[Ct[0],"bold 15px Arial",A],[Ct[1],"bold 15px Arial",A]],360,80,false,80,true,20);Wt.x=70;Wt.y=105;break;case 3:Wt=zi([[Ct[0],"bold 15px Arial",A],[Ct[1],"bold 15px Arial",A]],360,80,false,80,true,20);Wt.x=70;Wt.y=118;break;default:Wt=zi([[Ct[0],"bold 15px Arial",A],[Ct[1],"bold 15px Arial",A]],360,80,true,0,true,20);Wt.x=35;Wt.y=105}xr.addChild(Wt);Ht=new createjs.Bitmap(nt.getResult("meta_logo"));if(N===3){Ht.y=36}else{Ht.y=25}Ht.x=25;xr.addChild(Ht);Aa.update()}function qt(){var e=(ya+(na?0:1))*8;var a=[];var t=0;for(var r=0;r<e;r++){a.push({id:"obj_"+t,src:(v?i:"")+g.customGUI._challenge_imgs[r],type:createjs.LoadQueue.IMAGE});t++}if(na&&!H){for(var n=0;n<8;n++){a.push({id:"obj_"+t,src:(v?i:"")+sa[n].url,type:createjs.LoadQueue.IMAGE});t++}}if(wa){a.push({id:"survey_brand",src:wa,type:createjs.LoadQueue.IMAGE})}tn(a.length);tn(a);if(a.length>1)Fa.loadManifest(a)}function Jt(){tn("got victory load event in app");ga=true;if(pa){pa=false;mi()}}function Kt(){wt=true;rn("show screen","startup screen");window.clearTimeout(st);Aa.removeChild(Pa);if(it&&!B){tr()}else{rn("begin app","skip startup");rr()}Ji()}function Zt(){if($t){$t.visible=true}}function er(){if($t){$t.visible=false}}function ar(){if(!wt){it=false}else{rn("begin app","skip startup");rr()}}function tr(){var e=ot===true?88:133;var a=ot===true?30:45;var t=ot===true?35:55;var i=ot===true?6:7;var n=Aa.canvas.width/2-e/2;switch(Z){case"th":n=65;e=160;t=70;break}var s=ct.fc2_new_arrow!==undefined?2:1;var l="bold "+(ct.fc2_button_font_size!==undefined?ct.fc2_button_font_size:"28")+"px Arial";var o=ot?ct.fc2_stroke_colour:"#FFFFFF";var d=ot?ct.fc2_button_border_thickness:2;zt=$i([["Width",e],["Height",a],["colStrokeSize",90],["strokeSize",d],["strokeColour",o],["hasStroke",d===0?false:true],["arrowType",s],["taper",O],["text",[yt,l,ct.fc2_button_text_colour?ct.fc2_button_text_colour:k]],["textX",t],["textY",i],["textCenter",true],["overlayColor",C],["btnbgColor",b],["btnbgColor2",T]]);zt.x=n;if(!ot){zt.y=180}else{zt.x=n+.6;zt.y=188.5}$t=$i([["Width",zt.fullWidth+28],["Height",40],["colStrokeSize",90],["strokeSize",d],["strokeColour","red"],["hasStroke",d===0?false:true],["taper",O],["overlayColor",C],["btnbgColor","transparent"],["btnbgColor2","transparent"]]);$t.x=zt.regX+zt.x-zt.fullWidth-24;$t.y=zt.y-20;xr.addChild($t);$t.visible=false;xr.addChild(zt);var f=new createjs.Shape;if(!ot){f.graphics.beginFill(k).lineTo(0,20).lineTo(20,10).lineTo(0,0).closePath()}if(!ot){f.x=194;f.y=192}else{f.x=172;f.y=201}xr.addChild(f);zt.addEventListener("click",rr);if(g.sec_nothing===1){if(!ha&&!Sa){parent.loadVictoryScreen(aa?aa:r+c+"/"+u+"/bannerbg.jpg")}}Aa.update()}function rr(e){if(!wt)return false;rn("begin app","user clicked verify");if(d===5){vt=true;parent.checkAnswer(l,o,c,mt.toString(),ir)}st=setTimeout(function(){nn()},lt);Aa.removeChild(xr);if(g.sec_nothing===1){ln();return}Mr()}function ir(){vt=false;if(_t){if(g.sec_nothing===1){clearTimeout(pt);if(ha){parent.loadVictoryScreen(ua,null,null,da)}parent.victoryScreen();parent.showVictoryScreen();parent.setStars(Za);Ri();return}_t=false;za=true;hi()}}function nr(){var e=20;Pa=new createjs.Container;Qa=new createjs.Shape;Qa.graphics.beginFill(I);Qa.graphics.drawRect(0,0,1,e);Qa.graphics.endFill();var a=new createjs.Shape;var t=3;a.graphics.setStrokeStyle(1);a.graphics.beginStroke(I);a.graphics.drawRect(-t/2,-t/2,200,e+t);Pa.addChild(a);Pa.addChild(Qa);Pa.x=50;Pa.y=195;Aa.addChild(Pa)}function sr(){var e=13;Pa=new createjs.Container;Qa=new createjs.Shape;Qa.graphics.beginFill(I);Qa.graphics.drawRect(0,0,1,e);Qa.graphics.endFill();var a=new createjs.Shape;var t=0;a.graphics.setStrokeStyle(1);a.graphics.beginStroke(I);a.graphics.drawRect(-t/2,-t/2,200,e+t);Pa.addChild(a);Pa.addChild(Qa);Pa.x=50.5;Pa.y=196.5;Aa.addChild(Pa)}function lr(){var e=20;Fr=new createjs.Container;Ur=new createjs.Shape;Ur.graphics.beginFill(I);Ur.graphics.drawRect(0,0,1,e);Ur.graphics.endFill();var a=new createjs.Shape;var t=3;a.graphics.setStrokeStyle(1);a.graphics.beginStroke("#000000");a.graphics.drawRect(-t/2,-t/2,200,e+t);Fr.addChild(a);Fr.addChild(Ur);Fr.x=50;Fr.y=215;Aa.addChild(Fr)}function or(){var e=13;Fr=new createjs.Container;Ur=new createjs.Shape;Ur.graphics.beginFill(I);Ur.graphics.drawRect(0,0,1,e);Ur.graphics.endFill();var a=new createjs.Shape;var t=0;a.graphics.setStrokeStyle(1);a.graphics.beginStroke(I);a.graphics.drawRect(-t/2,-t/2,200,e+t);Fr.addChild(a);Fr.addChild(Ur);Fr.x=50.5;Fr.y=215;Aa.addChild(Fr)}function cr(e){var a=Fa.progress*100*(200/100);Qa.scaleX=a;Aa.update();if(window.parent.document){try{parent.passLoadProgress(Fa.progress)}catch(t){}}}function dr(e){if(Qa.scaleX>170){Qa.scaleX=177+Ua.progress*100/4.6;Aa.update()}}var fr,ur,gr,hr,pr,vr,_r,mr,wr,xr,Cr;var yr,br,Tr,kr,Sr,Ir,jr,Lr,Gr,Ar;var Fr,Ur,Rr;function Mr(){if(!ha&&!Sa){parent.loadVictoryScreen(aa?aa:r+c+"/"+u+"/bannerbg.jpg")}Aa.removeChild(xr);Aa.removeChild(Pa);Vi();if(_&&m){ur=Nt()}else if(U){var e=nt.getResult("bg");ur=new createjs.Bitmap(e)}else{e=Fa.getResult("bg");ur=new createjs.Bitmap(e)}Aa.addChild(ur);Aa.addChild(Dt);Dt.visible=false;_r=new createjs.Container;_r.x=0;_r.y=0;Aa.addChild(_r);wr=new createjs.Container;wr.x=0;wr.y=0;Aa.addChild(wr);Ar=new createjs.Bitmap(Fa.getResult("tick"));Ar.regX=Ar.image.width/2|0;Ar.regY=Ar.image.height/2|0;Ar.y=110;Ar.x=155;Cr=new createjs.Container;Cr.x=100;Cr.y=90;wr.addChild(Cr);jr=new createjs.Bitmap(Fa.getResult("midpic"));if(jr){jr.regX=jr.image.width/2|0;jr.regY=jr.image.height/2|0;jr.x=50;jr.y=34}if(ja){Di(jr,.9)}Cr.addChild(jr);mr=new createjs.Container;Aa.addChild(mr);hr=new createjs.Container;hr.x=6;hr.y=20;Aa.addChild(hr);hr.mouseEnabled=false;Sr=new createjs.Container;Sr.x=5;Sr.y=210;Aa.addChild(Sr);Sr.visible=false;Kr();Qr();Wr();createjs.Ticker.setFPS(60);createjs.Ticker.addEventListener("tick",ri);createjs.Ticker.addEventListener("tick",Qi);Aa.onMouseUp=function(e){if(!Ra){if(Ya){Ya=false;Ba.push([1,e.stageX,e.stageY])}}};Aa.onMouseDown=function(e){if(!Ra&&e.stageX>0&&e.stageX<250&&e.stageY>0&&e.stageY<300){Ya=true;Yr=Br;Ba.push([0,e.stageX,e.stageY])}};Aa.onMouseMove=function(e){if(Ya&&!Ra&&e.stageX>0&&e.stageX<250&&e.stageY>0&&e.stageY<300){Ba.push([3,e.stageX,e.stageY])}}}var Xr=[];var Yr=0;var Er=false;var Br=10;function Pr(){Er=true;Yr=Br;TweenLite.killTweensOf(hr);TweenLite.to(hr,.5,{alpha:0});TweenLite.to(hr,.5,{delay:5,onComplete:Qr})}function Qr(e){if(Ra==false||e){Er=false;hr.x=6;hr.y=20;TweenLite.killTweensOf(hr);TweenLite.to(hr,.5,{alpha:1,onComplete:Ei})}}var Nr;var Or=0;function Wr(){if(!ot){Nr=[[4,4],[111,4],[218,4],[4,86],[218,86],[4,168],[111,168],[218,168]]}else{Nr=[[2,2],[102,2],[202,2],[2,85],[202,85],[2,168],[102,168],[202,168]]}Oi(Nr);Hi(hr);if(Ca==ya){if(!ma){jr.visible=false}else if(wa){Cr.removeChild(jr);jr=null;jr=new createjs.Bitmap(Fa.getResult("survey_brand"));jr.regX=jr.image.width/2|0;jr.regY=jr.image.height/2|0;jr.x=50;jr.y=34;Cr.addChild(jr);TweenLite.from(jr,.5,{alpha:0});Di(jr,.9)}ra=true;if(!ot){hr.addChild(zi([[ka[0],"14px Arial",G],[ka[1],"bold 14px Arial",G],[ka[2],"14px Arial",G]],100,55))}else{if(!Ia){hr.addChild(zi([[ka[0],"14px Arial",G],[ka[1],"bold 14px Arial",G],[ka[2],"14px Arial",G]],105,55,null,null,false,null,j,null,false,true))}}}else{if(!ot){hr.addChild(zi([[Ta[0],"14px Arial",G],[Ta[1],"bold 14px Arial",G],[Ta[2],"14px Arial",G]],100,55))}else{if(!ja){hr.addChild(zi([[Ta[0],"14px Arial",G],[Ta[1],"bold 14px Arial",G],[Ta[2],"14px Arial",G]],105,53,null,null,false,null,j,null,false,true))}}}var e=Math.floor(Math.random()*7+1);for(var a=9-1;a>=1;a--){var t=new createjs.Container;var r;r=Fa.getResult("obj_"+Or);if(!ot){var i=new createjs.Bitmap(Fa.getResult("picFrame"));i.x=-3;i.y=-2.5;t.addChild(i)}var n=new createjs.Bitmap(r);tn(r);tn("_currentObj: "+Or);t.objID=Or;n.regX=n.image.width/2|0;n.regY=n.image.height/2|0;n.x=97/2;n.y=80/2;if(ot){if(Ca!==ya){i=new createjs.Shape;i.graphics.setStrokeStyle(1).beginStroke(ct._meta_icon_colour).drawRect(0,0,97,80);i.x=-.5;i.y=-.5;var s=new createjs.Shape;s.graphics.beginFill("#ffffff").drawRect(0,0,96,79)}else{i=new createjs.Shape;i.graphics.setStrokeStyle(1).beginStroke(ct._meta_icon_colour).drawRect(0,0,n.image.width,n.image.height);i.regX=n.image.width/2|0;i.regY=n.image.height/2|0;i.x=n.image.width/2-.5;i.y=n.image.height/2-.5;t.addChild(i);var s=new createjs.Shape;s.graphics.beginFill("#ffffff").drawRect(0,0,95,78)}}if(ot){t.addChild(s)}t.addChild(n);t.addChild(i);if(!ot){t.regX=n.image.width/2|0;t.regY=n.image.height/2|0}else{t.regX=97/2;t.regY=80/2}t.x=Nr[a-1][0]+t.regX;t.y=Nr[a-1][1]+t.regY;t.startX=t.x;t.startY=t.y;mr.addChild(t);TweenLite.from(t,.5,{scaleX:0,scaleY:0});Or++;(function(e){var a;var t;n.addEventListener("mousedown",function(r){if(Ra==false){t=[e.x,e.y];Hr=true;Dr();mr.addChild(e);a={x:e.x-r.stageX,y:e.y-r.stageY}}});n.addEventListener("pressmove",function(r){if(!Ra){e.x=r.stageX+a.x;e.y=r.stageY+a.y;if(hr.alpha>0){if(Wi(e.x,e.y,t[0],t[1])>10){Pr()}}}});n.addEventListener("pressup",function(a){tn(e.x,e.y);if(!Ra){Hr=false;if(e.x>65&&e.x<240&&e.y>50&&e.y<195){Ra=true;Ha.push(e.objID);TweenLite.to(e,1,{x:150,y:130,scaleX:.25,scaleY:.25,ease:Quart.easeOut});TweenLite.to(e,.3,{delay:.7,alpha:0});if(Ca==ya||H&&Ca==ya-1){var t=e.objID;if(na){var r=e.getChildAt(1).image.src;for(var i in sa){var n=sa[i];if(r.indexOf(n.url)!=-1){t=n.id;ua=n.victory;fa=n.victory_url;va=n.html;_a=n.click_macro;if(n.tracker!=""){parent.metricLoader(n.tracker+ +new Date)}break}}}rn("final guess","end challenge",t);la=t}TweenLite.to(this,1,{onComplete:zr})}else{TweenLite.to(e,.3,{x:e.startX,y:e.startY})}}})})(t)}TweenLite.to(this,.5,{onComplete:ai});Qr(true);if(ja){Di(jr,.9)}}var Hr=false;function Dr(){if(Hr){TweenLite.to(jr,.5,{scaleX:1.1,scaleY:1.1});TweenLite.to(jr,.5,{delay:.5,scaleX:1,scaleY:1,onComplete:Dr})}}function zr(){if(st){clearTimeout(st)}if(!Ti){Xi();Ra=true;Ca++;tn("_disableFinalChallenge: "+H);tn("_phase: "+Ca);tn("_maxPhase: "+ya);if(Ca<=ya-(H?1:0)){ii();ei()}else{if(H){ii()}di()}}}var $r,Vr,qr,Jr;function Kr(){qr=new createjs.Container;if(!ot){var e=110;var a=65;var t=$i([["Width",100],["Height",55],["colStrokeSize",30],["taper",O],["textX",33],["textY",7],["textCenter",true],["overlayColor",C],["btnbgColor",j],["btnbgColor2",L]]);t.x=3;t.y=3;qr.addChild(t);qr.x=97;qr.y=95;Aa.addChild(qr)}else{var e=136;var a=71;var t=$i([["Width",136],["Height",61],["colStrokeSize",0],["taper",O],["textX",33],["textY",7],["textCenter",true],["overlayColor",C],["btnbgColor",j],["btnbgColor2",L],["hasStroke",false]]);Aa.addChild(qr);qr.addChild(t)}if(d<30){if(!ot){var r=new createjs.Bitmap(Fa.getResult("star"));r.y=4;qr.addChild(r)}else{var r=sn(F);r.y=14;qr.addChild(r)}}if(!ot){if(ya==1){if(d<30){var i=30;r.x=55}else{i=27}}else{if(d<30){i=15;r.x=69}else{i=12}}}else{if(ya==1){if(d<30){var i=30;r.x=73}else{i=27}}else{if(d==10){i=15;r.x=69}else if(d==20){i=15;r.x=100}else{i=12}}}if(H&&d<30){i+=8}if(ot&&d<30){i+=10}else if(ot){i+=3}for(var n=0;n<=ya-(H?1:0);n++){if(n<f){if(!ot){var s=new createjs.Shape;s.graphics.setStrokeStyle(1).beginStroke(y).beginFill("#FFFFFF").drawRect(-5,0,13,13);qr.addChild(s);s.x=i-2;s.y=14;var l=new createjs.Bitmap(Fa.getResult("tick"));qr.addChild(l);l.regX=l.image.width/2|0;l.regY=l.image.height/2|0;l.tickID=n+1;l.checkboxgui=1;l.x=i;l.y=14;i+=16}else{var s=new createjs.Shape;if(F==="#000000"){s.graphics.setStrokeStyle(1,2,2);s.graphics.beginStroke("#c2c5c9");s.graphics.drawRect(-6,1,17,17)}s.graphics.setStrokeStyle(1,2,2);s.graphics.beginStroke(F);s.graphics.drawRect(-5,0,17,17);s.checkboxgui=1;qr.addChild(s);s.x=i-2.5;s.y=14.5;var l=new createjs.Shape;l.graphics.setStrokeStyle(3,2).beginStroke(F).moveTo(3,8).lineTo(6,12).lineTo(15,0);qr.addChild(l);l.tickID=n+1;l.checkboxgui=1;l.x=i-7;l.y=16;i+=20}l.visible=false}}if(!ot){Vr=new createjs.Bitmap(Fa.getResult("good"));Vr.regX=Vr.image.width/2|0;Vr.regY=Vr.image.height/2|0;Vr.y=42;Vr.x=50;qr.addChild(Vr);Vr.visible=false;$r=new createjs.Text("51.9 "+St,"14px Arial",F);$r.textAlign="center";$r.lineWidth=120}else{Vr=new createjs.Text("Check!","bold 16px Arial",G);Vr.textAlign="center";Vr.lineWidth=136;Vr.x=62;Vr.y=36;qr.addChild(Vr);$r=new createjs.Text("51.9 "+St,"14px Arial",G);$r.textAlign="center";$r.lineWidth=120}if(!ot){$r.x=50}else{$r.x=62}$r.y=35;qr.addChild($r);$r.visible=false;qr.cache(0,0,e,a);qr.visible=false;if(ot){qr.x=La.width/2-136/2;qr.y=La.height/2-61/2;t.x=-3;t.y=-3}Aa.update()}var Zr=0;function ei(){if(!Ti&&!g.sec_nothing){TweenLite.to(wr,.5,{alpha:0,onComplete:Wr});qr.visible=true;qr.alpha=0;TweenLite.to(qr,.5,{alpha:1});Vr.visible=false;if(Ca==1){Vr.visible=true}else{$r.visible=true;var e=(Zr/createjs.Ticker.getMeasuredFPS()).toFixed(1);$r.text=e+" seconds";if(Ca>=f){if(!Jr){Jr=new createjs.Text("","15px Arial",F);Jr.textAlign="center";Jr.lineWidth=120;Jr.y=15;if(!ot){Jr.x=50}else{Jr.x=62}qr.addChild(Jr)}var a=ya+(H?1:0);Jr.text=Ca+" of "+a}}for(var t=qr.getNumChildren()-1;t>=0;t--){var r=qr.getChildAt(t);if(Ca>=f){if(r.checkboxgui==1){r.visible=false}}else if(r.tickID){if(r.tickID==Ca){r.visible=true}}}qr.updateCache();TweenLite.to(wr,.5,{delay:.8,alpha:1});TweenLite.to(qr,.5,{delay:.8,alpha:0})}}function ai(){Zr=0;Ra=false;if(ja){Di(jr,.9)}}function ti(){ra=false;rn("engagement complete","user time",null,{user_time:(ia/createjs.Ticker.getMeasuredFPS()).toFixed(1)})}function ri(){if(!ca){if(!za&&!ra){Oa++;Zr++}if(Er&&!Ya){if(Yr<=0){Qr()}else{Yr--}}if(ra){ia++}}}function ii(){tn("Uploading guess with session token: "+o);if(dt){parent.checkAnswer(l,o,c,Ha.toString(),ni);if(Ca==ya){qa=true;za=true}}else{parent.checkAnswer(l,o,c,Ha.toString(),si)}}function ni(e){var a=jQuery.parseJSON(e);if(a&&a["response"]=="answered"){parent.setStars(Za)}}function si(e){tn("Response from check answer: ");tn(e);var a=jQuery.parseJSON(e);if(a&&a["error"]=="DENIED ACCESS"){fi();return}tn(a);if(a&&a["response"]=="answered"){qa=true;if(a["solved"]==true){za=true;Ka=a["result"];if(oi&&!Ti){di()}}else{rt=a["incorrect_guess"]==-1?-1:Ha[a["incorrect_guess"]-1];ki()}}}var li;var oi=false;var ci=false;function di(){if(!Ti){oi=true;Ra=true;if(!g.sec_nothing){ti();TweenLite.to(_r,.5,{alpha:0});TweenLite.to(hr,.5,{alpha:0});TweenLite.to(wr,.5,{alpha:0});if(ci!==true){var e=5;var a=Ma-5-77;var t=(a-e)/(Ha.length-1);ht=new createjs.Container;for(var r=0;r<=Ha.length-1;r++){var i=new createjs.Bitmap(Fa.getResult("obj_"+Ha[r]));i.regX=i.image.width/2|0;i.regY=i.image.height/2|0;i.x=-100;i.y=30+i.regY;if(ya==1){if(r==0){TweenLite.to(i,.5,{x:90})}else{TweenLite.to(i,.5,{x:210})}}else if(ya==0){TweenLite.to(i,.5,{x:150})}else{TweenLite.to(i,.5,{x:5+t*r+i.regX})}ht.addChild(i)}mr.addChild(ht);ci=true}}if(ya==0&&!vt){za=true;hi()}else if(qa&&za){hi()}else{_t=true;li=new createjs.Container;li.x=10;li.y=210;Aa.addChild(li);if(!ot){li.addChild(zi([[It,"14px Arial",G]],280,25,true,20,W))}else{li.addChild(zi([[It,"14px Arial",G]],280,25,true,20,W,20,ct.fc2_text_bg,false,false,true))}pt=setTimeout(fi,1e4)}}}function fi(){parent.setupSameChallenge();Pi()}var ui=5;var gi=10;function hi(){if(ha){parent.loadVictoryScreen(ua,null,null,da)}if(li){TweenLite.killTweensOf(li);Aa.removeChild(li)}Ti=true;Oa+=Zr;Zr=0;tn("_timer: "+Oa);if(typeof Oa!=="undefined"&&Oa!==0){var e=Oa/createjs.Ticker.getMeasuredFPS();e=e.toFixed(1)}else{e=0}var a=new createjs.Container;a.x=80;a.y=120;Aa.addChild(a);if(!ot){var t=zi(null,110,50)}else{var t=zi(null,110,50,null,null,null,null,j,false,false,true)}t.x=12;a.addChild(t);if(!ot)var r="14px Arial";else var r="17px Arial";if(!ot){var i=new createjs.Text(e+" "+St,r,y);i.textAlign="center";i.lineWidth=120;i.x=68;i.y=33}else if(ya!=0){var i=new createjs.Text(e+" "+St,r,F);i.textAlign="center";i.lineWidth=120;i.x=68;i.y=30}a.addChild(i);TweenLite.to(a,.5,{delay:1.5,alpha:0,onComplete:Ni,onCompleteParams:[a]});tn("_actualTime: "+e);wi(e);rn("solved game","user time",null,{user_time:e});Ja+=Za;if(!ot){xi(Za)}else{Ci(Za)}document.body.style.cursor="default";if(!g.sec_nothing){qi()}TweenLite.to(this,ga?2:3,{onComplete:mi})}var pi,vi,_i;function mi(){if(ga){if(za){clearTimeout(pt);Ri();Mi();if(g.extra_data){if(g.extra_data.fc_view_macro&&g.extra_data.fc_view_macro!=""){parent.metricLoader(g.extra_data.fc_view_macro)}}if(Sa&&!ot){Gr=new createjs.Bitmap(Fa.getResult("complete"));Aa.addChild(Gr);var e=new createjs.Bitmap(Fa.getResult("completeTxt"));e.regX=e.image.width/2|0;e.regY=e.image.height/2|0;e.x=150;e.y=125;Aa.addChild(e);TweenLite.from(e,.5,{delay:.3,scaleX:0,scaleY:0,rotation:"360"});if(Y){var a=new createjs.Bitmap(Fa.getResult("completeStars"));a.regX=a.image.width/2|0;a.regY=a.image.height/2|0;a.x=150;a.y=135;Aa.addChild(a);TweenLite.from(a,.4,{scaleX:0,scaleY:0})}TweenLite.from(Gr,.5,{alpha:0});TweenLite.to(ur,.5,{alpha:0})}else{tn("app telling to show vs!");parent.showVictoryScreen();Ri()}}}else{pa=true;rn("loading","waiting on lazy load of victory screen");_i=new createjs.Container;_i.x=95;_i.y=220;Aa.addChild(_i);if(!ot)_i.addChild(zi([["Verifying...","14px Arial",G]],100,25,false));else _i.addChild(zi([["Verifying...","14px Arial",G]],100,25,false,null,true,null,null,false,false,true));yi();TweenLite.to(_i,3,{onComplete:Ri})}}function wi(e){ui=ya*3.33;gi=ya*6.66;var a=Math.round(10*ui)/10;var t=Math.round(10*(ui+gi)/2)/10;var r=Math.round(10*gi)/10;var i=Math.round(10*(gi*4))/10;if(e<a){Za=5}else if(e<t){Za=4}else if(e<r){Za=3}else if(e<i){Za=2}else{Za=1}if(e==0||ya==0)Za=5;tn("_5Stars: "+a+", _4Stars: "+t+", _3Stars: "+r+", _2Stars: "+i)}function xi(e){var a=new createjs.Container;var t;var r;switch(e){case 0:t=Fa.getResult("goodtry");r=Fa.getResult("cross");break;case 1:t=Fa.getResult("good");r=Fa.getResult("l_tick");break;case 2:t=Fa.getResult("good");r=Fa.getResult("l_tick");break;case 3:t=Fa.getResult("great");r=Fa.getResult("l_tick");break;case 4:t=Fa.getResult("great");r=Fa.getResult("l_tick");break;case 5:t=Fa.getResult("perfect");r=Fa.getResult("l_tick")}var i=new createjs.Bitmap(t);i.regX=i.image.width/2|0;i.regY=i.image.height/2|0;i.y=45;a.addChild(i);var n=new createjs.Bitmap(r);n.regX=n.image.width/2|0;n.regY=n.image.height/2|0;n.y=120;a.addChild(n);for(var s=e-1;s>=0;s--){var l=Fa.getResult("star");var o=new createjs.Bitmap(l);
o.regX=o.image.width/2|0;o.regY=o.image.height/2|0;switch(s){case 0:o.x=0;o.y=0;break;case 1:o.x=-35;o.y=22;break;case 2:o.x=30;o.y=25;break;case 3:o.x=-35;o.y=-12;break;case 4:o.x=35;o.y=-15;break}a.addChild(o);TweenLite.from(o,.5,{delay:.3+s*.1,scaleX:0,scaleY:0,x:0,y:0});TweenLite.to(o,.2,{delay:1,y:"-30"});TweenLite.to(o,.4,{delay:1.3,y:400})}TweenLite.from(n,.5,{delay:.5,alpha:0});TweenLite.to(n,.5,{delay:1.5,alpha:0});TweenLite.from(i,.5,{delay:.5,scaleX:0,scaleY:0,x:0,y:45});TweenLite.to(i,.5,{delay:1.5,y:-200});Aa.addChild(a);a.x=150;a.y=90}function Ci(e){var a=new createjs.Container;var t;var r;switch(e){case 1:case 2:r="Good";break;case 3:case 4:r="Great";break;case 5:r="Perfect";break}var i=new createjs.Text(r,"bold 18px Arial",F);i.textAlign="center";i.y=37;if(ya==0)i.y=45;a.addChild(i);for(var n=e-1;n>=0;n--){var s=sn(F,L);s.regX=s.width/2|0;s.regY=s.height/2|0;switch(n){case 0:s.x=0;s.y=0;break;case 1:s.x=-35;s.y=22;break;case 2:s.x=30;s.y=25;break;case 3:s.x=-35;s.y=-12;break;case 4:s.x=35;s.y=-15;break}a.addChild(s);TweenLite.from(s,.5,{delay:.3+n*.1,scaleX:0,scaleY:0,x:0,y:0});TweenLite.to(s,.2,{delay:1,y:"-30"});TweenLite.to(s,.4,{delay:1.3,y:400});TweenLite.from(i,.5,{delay:.5,scaleX:1,scaleY:1});TweenLite.to(i,.5,{delay:1.5,y:-200})}Aa.addChild(a);a.x=145;a.y=90}function yi(){if(!ht)return null;var e=2;for(var a=0;a<=ht.getNumChildren()-1;a++){var t=Math.floor(Math.random()*4);var r=ht.getChildAt(a);switch(t){case 0:r.dx=e;r.dy=e;break;case 1:r.dx=-e;r.dy=e;break;case 2:r.dx=e;r.dy=-e;break;case 3:r.dx=-e;r.dy=-e;break}}ut=ht.getChildAt(ht.getNumChildren()-1);createjs.Ticker.addEventListener("tick",bi)}function bi(){for(var e=0;e<=ht.getNumChildren()-1;e++){var a=ht.getChildAt(e);if(a.x<20||a.x>270){a.dx=-a.dx}if(a.y<20||a.y>220){a.dy=-a.dy}a.x+=a.dx;a.y+=a.dy}}var Ti=false;function ki(){if(!Ti){TweenLite.killTweensOf(Ar);TweenLite.killTweensOf(wr);TweenLite.to(Ar,.5,{alpha:0});TweenLite.to(_r,.5,{alpha:0});TweenLite.to(hr,.5,{alpha:0});TweenLite.to(wr,.5,{alpha:0});TweenLite.killTweensOf(qr);TweenLite.to(qr,0,{alpha:0});if(rt!=-1){Xi()}else{if(!H){Xi();var e=5;var a=Ma-5-77;var t=(a-e)/(Ha.length-1);ht=new createjs.Container;for(var r=0;r<=Ha.length-1;r++){var i=new createjs.Bitmap(Fa.getResult("obj_"+Ha[r]));i.regX=i.image.width/2|0;i.regY=i.image.height/2|0;i.x=-100;i.y=30+i.regY;if(ya==1){if(r==0){TweenLite.to(i,.5,{x:90})}else{TweenLite.to(i,.5,{x:210})}}else{TweenLite.to(i,.5,{x:5+t*r+i.regX})}ht.addChild(i)}mr.addChild(ht)}mr.addChild(ht);TweenLite.to(ht,.5,{y:50})}if(li){TweenLite.killTweensOf(li);Aa.removeChild(li)}rn("failed game","incorrect answer",rt);Ti=true;Ra=true;var n;Hi(hr);n=Fa.getResult("obj_"+rt);if(rt!=-1){if(!ot){s=zi([[Ta[0],"14px Arial",y],[Ta[1],"bold 14px Arial",y],[Ta[2],"14px Arial",y]],100,55);s.y=55;s.x=98}else{s=zi([[Ta[0],"16px Arial",G],[Ta[1],"bold 15px Arial",G],[Ta[2],"15px Arial",G]],120,65,false,60,W,20,ct.fc2_text_bg,false,false,true);s.y=35;s.x=Aa.canvas.width/2-120/2}Aa.addChild(s);if(!W&&!ot){Ot=Qt(w,x);Aa.addChild(Ot);Ot.y=-76;Ot.scaleY=.8}else if(!W&&ot){Ot=new createjs.Shape;Ot.graphics.beginFill(ct.fc2_text_bg).drawRect(0,6,265,25);Ot.x=La.width/2-265/2;Aa.addChild(Ot)}}else{var s=zi([["Whoops! At least one of your answers is not quite right.","17px Arial",G]],240,48,false,120,W,20,ct.fc2_text_bg,false,false,true);s.x=57;s.y=8;Aa.addChild(s)}if(rt!=-1){var i=new createjs.Bitmap(n);i.regX=i.image.width/2|0;i.regY=i.image.height/2|0;i.x=La.width/2;if(!ot){i.y=116+i.regY}else{i.y=115+i.regY}_picFrame=new createjs.Shape;_picFrame.graphics.setStrokeStyle(1).beginFill("#ffffff").beginStroke(ct._meta_icon_colour).drawRect(0,0,97,80);_picFrame.regX=97/2;_picFrame.regY=80/2;_picFrame.x=La.width/2;_picFrame.y=i.y-1;mr.addChild(_picFrame);mr.addChild(i);TweenLite.from(i,.5,{scaleX:0,scaleY:0});TweenLite.from(_picFrame,.5,{scaleX:0,scaleY:0})}if(!ta){if(!S){Dt.visible=true;Dt.alpha=0;ur.visible=false}}Sr.visible=true;Sr.y=250;TweenLite.to(Sr,.5,{delay:.5,y:220});if(rt!=-1){if(!ot){var l=new createjs.Text("Whoops! That's not quite right.","14px Arial",G);l.y=20}else{var l=new createjs.Text("Whoops! That's not quite right.","17px Arial",G);l.y=8}l.textAlign="center";l.x=150;Aa.addChild(l)}var o=80;var c=134;var d=70;switch(Z){case"th":o=60;c=170;d=85;break;case"in":d=66;break}if(!ot){Rr=$i([["Width",c],["Height",45],["colStrokeSize",30],["taper",O],["text",[jt,"bold 24px Arial",y]],["textX",d],["textY",7],["textCenter",true],["overlayColor",C],["btnbgColor",D],["btnbgColor2",z]]);Rr.x=o;Rr.y=195;Aa.addChild(Rr);Rr.visible=false}else{var f="bold "+(ct.fc2_button_font_size!==null?ct.fc2_button_font_size:"28")+"px Arial";var u=110;var g=30;var h=ot?ct.fc2_button_border_thickness:2;Rr=$i([["Width",u],["Height",g],["colStrokeSize",90],["hasStroke",h===0?false:true],["strokeSize",1],["strokeColour",ct.fc2_button_text_colour?ct.fc2_button_text_colour:y],["arrowType",2],["taper",O],["text",[jt,f,ct.fc2_button_text_colour?ct.fc2_button_text_colour:y]],["textX",45],["textY",6],["textCenter",true],["overlayColor",C],["btnbgColor",b],["btnbgColor2",T]]);Rr.x=La.width/2-u/2+.1;Rr.y=206.5;Aa.addChild(Rr);Rr.visible=false}_r.x=0;_r.y=80;TweenLite.to(_r,.5,{alpha:1});var p=Fa.getResult("cross");var v=new createjs.Bitmap(p);if(rt!=-1){v.x=Aa.canvas.width/2-v.image.width/2;v.y=95}else{v.x=15;v.y=10;v.scaleX=v.scaleY=.7}if(rt==-1){Ai(ht.getNumChildren(),ht)}Aa.addChild(v);TweenLite.to(Dt,.5,{alpha:1});Yi(v,.4,.1);if(!ot)lr();else or();clearTimeout(pt);Bi()}}var Si=0;var Ii=0;var ji;var Li;var Gi=[];function Ai(e,a){ji=setInterval(Fi,1e3);Ii=e;Li=a;for(var t=0;t<=a.getNumChildren()-1;t++){Gi[t]=a.getChildAt(t)}}function Fi(){if(Si!=0){var e=Gi[Si-1];TweenLite.to(e,.5,{scaleX:1,scaleY:1});Li.setChildIndex(e,Si-1)}else{var e=Gi[Li.getNumChildren()-1];TweenLite.to(e,.5,{scaleX:1,scaleY:1});Li.setChildIndex(e,Li.getNumChildren()-1)}var e=Gi[Si];TweenLite.to(e,.5,{scaleX:1.1,scaleY:1.1});Li.setChildIndex(e,Li.getNumChildren()-1);if(Si+1==Ii)Si=0;else Si++}var Ui=false;function Ri(){if(!Ui){Ui=true;if(window.parent.document){try{parent.solveMeta()}catch(e){tn(e)}}}}function Mi(){$(".starCount",document).html(Ja)}function Xi(){for(var e=mr.getNumChildren()-1;e>=0;e--){var a=mr.getChildAt(e);TweenLite.to(a,.5,{scaleX:0,scaleY:0,onComplete:Ni,onCompleteParams:[a]})}}function Yi(e,a,t){if(!a){a=.15}if(!t){t=a}TweenLite.to(e,a,{alpha:1});TweenLite.to(e,t,{delay:a,alpha:0,onComplete:Yi,onCompleteParams:[e,a,t]})}function Ei(){TweenLite.to(hr,1.5,{delay:0,x:198,y:20,ease:Linear.easeNone});TweenLite.to(hr,1.5,{delay:1.5,x:198,y:185,ease:Linear.easeNone});TweenLite.to(hr,1.5,{delay:3,x:2,y:185,ease:Linear.easeNone});TweenLite.to(hr,1.5,{delay:4.5,x:2,y:20,onComplete:Ei,ease:Linear.easeNone})}function Bi(){if(window.parent.document){try{parent.setTime(Oa);parent.getSameFC()}catch(e){tn(e)}}}function Pi(){$("#FunCAPTCHA",document).unbind("nextAppLoaded",Ki);if(window.parent.document){try{parent.destroyLastCaptcha()}catch(e){window.location.reload()}}}function Qi(){if(!ca){Aa.update()}}function Ni(e){Aa.removeChild(e)}function Oi(e){var a=e.length;if(a==0)return false;while(--a){var t=Math.floor(Math.random()*(a+1));var r=e[a];var i=e[t];e[a]=i;e[t]=r}}function Wi(e,a,t,r){var i=e-t;var n=a-r;return Math.sqrt(i*i+n*n)}function Hi(e){e.removeAllChildren()}function Di(e,a){if(a){TweenLite.to(e,.5,{scaleX:a,scaleY:a})}else{TweenLite.to(e,.5,{scaleX:1.1,scaleY:1.1})}TweenLite.to(e,.5,{delay:.5,scaleX:1,scaleY:1,onComplete:Di,onCompleteParams:[e,a]})}function zi(e,a,t,r,i,n,s,l,o,c,d){var f=new createjs.Container;if(!n){l=l!==undefined?l:w;o=o===undefined?true:false;c=c===undefined?true:false;var u=new createjs.Container;f.addChild(u);var g=new createjs.Shape;g.graphics.setStrokeStyle(4);if(c)g.graphics.beginStroke("#000000");if(o)g.graphics.drawRoundRect(0,0,a,t,4);else g.graphics.drawRect(0,0,a,t);u.addChild(g);g.regX=a/2|0;g.regY=t/2|0;g.x=a/2;g.y=t/2;var h=new createjs.Shape;h.graphics.beginFill(l);if(c)h.graphics.setStrokeStyle(2).beginStroke("#FFFFFF");if(o)h.graphics.drawRoundRect(0,0,a,t,4);else h.graphics.drawRect(0,0,a,t);u.addChild(h);h.regX=a/2|0;h.regY=t/2|0;h.x=a/2;h.y=t/2;u.regX=a/2|0;u.regY=t/2|0;u.x=a/2;u.y=t/2;u.cache(-(a*.1),-(t*.1),a+a*.25,t+t*.25);if(!d)Di(u)}if(e){if(!s){s=15}var p=6;for(var v=0;v<=e.length-1;v++){var _=new createjs.Text(e[v][0],e[v][1],e[v][2]);if(!r){_.textAlign="center";if(i){_.x=i}else{_.x=52}}else{if(i){_.x=i}else{_.x=5}}_.lineWidth=a;_.y=p;f.addChild(_);p+=s}}return f}function $i(e){var a="#ffd33a";var t="#ffbb36";var r="#FFFFFF";var i=12;var n,s,l=0;var o=false;var c=0;var d=0;var f=true;var u=2;var g="#ffffff";var h=1;var p=false;var v;var _=0;var m=0;var w;var x;var C;var y=true;if(navigator.userAgent.toLowerCase().indexOf("firefox")>-1){y=false}for(var b=e.length-1;b>=0;b--){switch(e[b][0]){case"Width":n=e[b][1];break;case"Height":c=e[b][1];break;case"colStrokeSize":d=e[b][1];break;case"text":v=e[b][1];break;case"textY":m=e[b][1];break;case"textX":_=e[b][1];break;case"textCenter":p=e[b][1];break;case"taper":i=e[b][1];break;case"btnbgColor":a=e[b][1];break;case"btnbgColor2":t=e[b][1];break;case"overlayColor":r=e[b][1];break;case"InnerChild":w=e[b][1];break;case"InnerChildX":x=e[b][1];break;case"InnerChildY":C=e[b][1];break;case"autoWidth":o=e[b][1];break;case"extraWidth":s=e[b][1];break;case"minWidth":l=e[b][1];break;case"strokeSize":u=e[b][1];break;case"strokeColour":g=e[b][1];break;case"arrowType":h=e[b][1];break;case"hasStroke":f=e[b][1];break}}if(v){var T=new createjs.Text(v[0],v[1],v[2]);if(p){T.textAlign="center"}T.x=_;T.y=m;T.lineWidth=n}if(o&&v){n=T.getMeasuredWidth()+s}if(l){if(n<l){n=l}}var S=new createjs.Container;var I=new createjs.Shadow("#000000",1,1,5);S.fullWidth=n;if(!V&&f){var j=new createjs.Shape;j.graphics.setStrokeStyle(4).beginStroke("#000000").drawRoundRect(0,0,n,c,i);if(!q){j.shadow=I}S.addChild(j);j.regX=n/2;j.regY=c/2;j.x=n/2;j.y=c/2}var L=new createjs.Shape;if(a!==t){L.graphics.beginLinearGradientFill([a,t],[0,.1],0,20,0,120)}else{L.graphics.beginFill(a)}if(f){L.graphics.setStrokeStyle(u);L.graphics.beginStroke(g)}if(i){L.graphics.drawRoundRect(0,0,n,c,i)}else{L.graphics.drawRect(0,0,n,c)}S.addChild(L);if(h==2){var G=new createjs.Shape;G.graphics.beginFill(ct.fc2_button_text_colour?ct.fc2_button_text_colour:k).lineTo(5,0).lineTo(5,-4).lineTo(15,2).lineTo(5,8).lineTo(5,4).lineTo(0,4).lineTo(0,0).closePath();G.x=65.5;G.x=n-15-8;G.y=12.5;S.addChild(G)}if(!J&&t){var A=new createjs.Shape;A.graphics.beginLinearGradientFill([r,t],[0,.1],0,10,0,120).drawRoundRect(0,0,n,c,i);A.alpha=.3;S.addChild(A);A.regX=n/2|0;A.regY=c/2|0;A.x=n/2;A.y=c/2;A.scaleX=.96;A.scaleY=.9}if(w){S.addChild(w);w.x=x;w.y=C}if(!ot){var F=new createjs.Shape;F.graphics.beginFill("#ffffff").setStrokeStyle(d).beginStroke(createjs.Graphics.getRGB(0,0,0)).drawRoundRect(0,0,n,c,i);S.addChild(F);F.alpha=.01}else{var F=new createjs.Shape;F.graphics.beginFill("#ffffff").setStrokeStyle(5).beginStroke(createjs.Graphics.getRGB(0,0,0)).drawRoundRect(0,0,n,c,i);S.addChild(F);F.alpha=.01}if(v){T.lineWidth=n;S.addChild(T)}S.regX=S.width/2;S.regY=S.height/2;S.addEventListener("rollover",function(e){document.body.style.cursor="pointer"});S.addEventListener("rollout",function(e){document.body.style.cursor="default"});if(y){S.cache(-(n*.1),-(c*.1),n+n*.25,c+c*.25,1.1)}return S}function Vi(){La.onselectstart=function(){return false};if(createjs.Touch.isSupported()){createjs.Touch.enable(Aa)}else{Aa.enableMouseOver()}}function qi(){La.onselectstart=function(){};if(createjs.Touch.isSupported()){createjs.Touch.disable(Aa)}else{Aa.enableMouseOver(0)}}function Ji(){if(window.parent.document){try{parent.onAppLoad()}catch(e){tn(e)}}}function Ki(e){Aa.removeChild(Fr);Rr.visible=true;TweenLite.from(Rr,.3,{alpha:0});Rr.addEventListener("click",Pi)}function Zi(e){ca=true}function en(e){ca=false}function an(e,a){Ur.scaleX=a.appProgress*100*(200/100)}function tn(e){if(a){console.log(e)}}function rn(a,t,r,i){if(e){if(window.parent.document){try{parent.sendAnalytics(a,t,r,i)}catch(n){tn(n)}}}}function nn(){if(window.parent.document){try{parent.displayPhoneOption()}catch(e){tn(e)}}}function sn(e,a){if(ft){return new createjs.Bitmap(Fa.getResult("customStarAsset"))}e=e==null?y:e;var t=new createjs.Shape;t.graphics.setStrokeStyle(1,2,2);if(a)t.graphics.beginStroke(a);t.graphics.beginFill(e).moveTo(8,0).lineTo(10,6).lineTo(17,6).lineTo(11,10).lineTo(14,17).lineTo(8,13).lineTo(4,17).lineTo(5,10).lineTo(0,6).lineTo(6,6).lineTo(8,0);return t}function ln(){createjs.Ticker.setFPS(60);createjs.Ticker.addEventListener("tick",ri);createjs.Ticker.addEventListener("tick",Qi);window.clearTimeout(st);Aa.removeChild(xr);Aa.removeChild(Pa);Aa.removeChild(zt);Aa.removeAllChildren();if(_&&m){ur=Nt()}else if(U){var e=nt.getResult("bg");ur=new createjs.Bitmap(e)}else{e=Fa.getResult("bg");ur=new createjs.Bitmap(e)}Aa.addChild(ur);Aa.addChild(Dt);Dt.visible=false;di()}})();